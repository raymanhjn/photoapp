{"version":3,"sources":["../../node_modules/@angular/core/@angular lazy","../../src lazy","../../src/pages/home/home.ts","../../src/pages/photolist/photolist.ts","../../src/app/main.ts","../../src/app/app.module.ts","../../src/app/app.component.ts","../../src/providers/gvision/gvision.ts"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,4CAA4C,WAAW;AACvD;AACA;AACA,kC;;;;;;;ACVA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,4CAA4C,WAAW;AACvD;AACA;AACA,kC;;;;;;;;;;;;;;;;;;;;;ACV0C;AACI;AAES;AAMvD,IAAa,QAAQ;IACnB,kBAAmB,aAA4B;QAA5B,kBAAa,GAAb,aAAa,CAAe;IAC/C,CAAC;IAED,8BAAW,GAAX;QACE,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,2EAAa,CAAC,CAAC;IACzC,CAAC;IAEH,eAAC;AAAD,CAAC;AARY,QAAQ;IAJpB,wEAAS,CAAC;QACT,QAAQ,EAAE,WAAW;OACG;KACzB,CAAC;aAE+C;AAOhD;SARY,QAAQ,e;;;;;;;;;;;;;;;;;;;;;;ACT4C;AAC4B;AAChC;AACC;AAO9D,IAAa,aAAa;IAYxB,uBACW,OAAsB,EACtB,SAA0B,EAC1B,SAAoB,EACnB,MAAc,EACd,WAA8B,EAC/B,IAAU;QALV,YAAO,GAAP,OAAO,CAAe;QACtB,cAAS,GAAT,SAAS,CAAiB;QAC1B,cAAS,GAAT,SAAS,CAAW;QACnB,WAAM,GAAN,MAAM,CAAQ;QACd,gBAAW,GAAX,WAAW,CAAmB;QAC/B,SAAI,GAAJ,IAAI,CAAM;IAErB,CAAC;IAED,wCAAgB,GAAhB;QAAA,iBA6CC;QA5CC,IAAI,CAAC,KAAK,GAAC,EAAE,CAAC;QACd,IAAI,CAAC,UAAU,GAAC,EAAE,CAAC;QACnB,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC,eAAe,CAAC;QACpC,IAAI,CAAC,MAAM,GAAC,EAAE,CAAC;QAEf,IAAI,KAAK,GAAI,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC;QAEzC,cAAc;QACd,IAAI,KAAK,GAAG,KAAK,CAAC;QAClB,IAAI,WAAW,GAAG,EAAE,KAAK,EAAE,EAAE,UAAU,EAAE,CAAC,KAAK,GAAE,MAAM,GAAG,aAAa,CAAC,EAAE,EAAE,CAAC;QAE7E,EAAE,EAAC,SAAS,CAAC,YAAY,IAAI,SAAS,CAAC,YAAY,CAAC,YAAY,CAAC,CAAC,CAAC;YAC/D,SAAS,CAAC,YAAY,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,UAAS,MAAM;gBACnE,EAAE,EAAC,WAAW,IAAI,KAAK,CAAC,CAAC,CAAC;oBACxB,KAAK,CAAC,SAAS,GAAG,MAAM,CAAC;gBAC3B,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,KAAK,CAAC,GAAG,GAAG,MAAM,CAAC,GAAG,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC;gBACjD,CAAC;gBACD,KAAK,CAAC,gBAAgB,GAAG;oBACvB,KAAK,CAAC,IAAI,EAAE,CAAC;gBACf,CAAC;YACH,CAAC,EAAE,aAAG;gBACJ,IAAI,KAAK,GAAG,KAAI,CAAC,SAAS,CAAC,MAAM,CAAC;oBAChC,KAAK,EAAE,cAAc;oBACrB,QAAQ,EAAE,GAAG,CAAC,IAAI;oBAClB,OAAO,EAAE,CAAC;4BACR,IAAI,EAAE,IAAI;4BACV,IAAI,EAAE,QAAQ;4BACd,OAAO,EAAE;gCACP,sBAAsB;4BACxB,CAAC;yBACF,CAAC;iBACH,CAAC,CAAC;gBACH,KAAK,CAAC,OAAO,EAAE,CAAC;YAClB,CAAC,CAAC,CAAC;QACP,CAAC;QAAA,IAAI,EAAC;YACJ,2CAA2C;YAC3C,IAAI,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;gBAChC,KAAK,EAAE,cAAc;gBACrB,QAAQ,EAAE,wBAAwB;gBAClC,OAAO,EAAE,CAAC,IAAI,CAAC;aAChB,CAAC,CAAC;YACH,KAAK,CAAC,OAAO,EAAE,CAAC;QAClB,CAAC;IACH,CAAC;IAED,uBAAuB;IACvB,iCAAS,GAAT;QAAA,iBAeC;QAdC,IAAM,OAAO,GAAkB;YAC7B,OAAO,EAAE,GAAG;YACZ,eAAe,EAAE,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,QAAQ;YACrD,YAAY,EAAE,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,IAAI;YAC3C,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,OAAO;SACzC,CAAC;QAEF,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,UAAC,SAAS;YAC7C,KAAI,CAAC,WAAW,GAAG,yBAAyB,GAAG,SAAS,CAAC;YACzD,KAAI,CAAC,KAAK,GAAG,KAAI,CAAC,WAAW,CAAC;YAC9B,KAAI,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;QAC1B,CAAC,EAAE,UAAC,GAAG;YACL,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QACnB,CAAC,CAAC,CAAC;IACL,CAAC;IAED,uBAAuB;IACvB,+BAAO,GAAP,UAAQ,SAAS;QAAjB,iBA4BC;QA3BC,IAAI,OAAO,GAAG,IAAI,8DAAO,CAAC,EAAC,cAAc,EAAG,kBAAkB,EAAC,CAAC,CAAC;QACjE,IAAI,OAAO,GAAG,IAAI,qEAAc,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACvD,IAAI,OAAO,GAAG,yCAAyC,CAAC;QACxD,IAAI,GAAG,GAAG,uDAAuD,GAAC,OAAO,CAAC;QAC1E,IAAI,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC;YAC3B,UAAU,EAAE;gBACV;oBACE,UAAU,EAAE;wBACV;4BACE,MAAM,EAAE,iBAAiB;yBAC1B;qBACF;oBACD,OAAO,EAAE;wBACL,SAAS,EAAC,SAAS;qBACtB;iBACF;aACF;SACF,CAAC,CAAC;QAEH,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO,CAAC;aAClC,SAAS,CAAE,cAAI;YACd,0CAA0C;YAC1C,KAAI,CAAC,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,gBAAgB,CAAC;YAC1E,OAAO,CAAC,GAAG,CAAC,KAAI,CAAC,UAAU,CAAC,CAAC;QAC/B,CAAC,EAAE,aAAG;YACJ,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QACnB,CAAC,CAAC,CAAC;IACP,CAAC;IAED,SAAS;IACT,iCAAS,GAAT;QAAA,iBA0DC;QAzDC,oBAAoB;QACpB,IAAI,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QAC5D,IAAI,KAAK,GAAI,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC;QACzC,OAAO,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC,EAAC,CAAC,EAAC,GAAG,EAAC,GAAG,CAAC,CAAC;QAEtC,0BAA0B;QAC1B,IAAI,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;QAClE,IAAI,MAAM,GAAG,OAAO,CAAC,OAAO,CAAC,gCAAgC,EAAE,EAAE,CAAC,CAAC;QACnE,uBAAuB;QACvB,EAAE,EAAC,OAAO,KAAK,IAAI,IAAI,OAAO,KAAK,EAAE,CAAC,EAAC;YACrC,IAAI,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;gBAChC,KAAK,EAAE,iBAAiB;gBACxB,QAAQ,EAAE,qBAAqB;gBAC/B,OAAO,EAAE,CAAC,IAAI,CAAC;aAChB,CAAC,CAAC;YACH,KAAK,CAAC,OAAO,EAAE,CAAC;QAClB,CAAC;QACD,6CAA6C;QAC7C,IAAI,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;YACpC,OAAO,EAAC,uBAAuB;SAChC,CAAC,CAAC;QAEH,IAAI,OAAO,GAAG,IAAI,8DAAO,CAAC,EAAC,cAAc,EAAG,kBAAkB,EAAC,CAAC,CAAC;QACjE,IAAI,OAAO,GAAG,IAAI,qEAAc,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACvD,IAAI,OAAO,GAAG,yCAAyC,CAAC;QACxD,IAAI,GAAG,GAAG,uDAAuD,GAAC,OAAO,CAAC;QAC1E,IAAI,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC;YAC3B,UAAU,EAAE;gBACV;oBACE,UAAU,EAAE;wBACV;4BACE,MAAM,EAAE,iBAAiB;yBAC1B;qBACF;oBACD,OAAO,EAAE;wBACL,SAAS,EAAC,MAAM;qBACnB;iBACF;aACF;SACF,CAAC,CAAC;QACH,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO,CAAC;aAClC,SAAS,CAAE,cAAI;YACd,0CAA0C;YAC1C,4DAA4D;YAC5D,KAAI,CAAC,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,gBAAgB,CAAC;YAE1E,OAAO,CAAC,OAAO,EAAE,CAAC;YAClB,IAAI,KAAK,GAAG,KAAI,CAAC,UAAU,CAAC,GAAG,CAAG,UAAC,SAAS;gBAC1C,KAAI,CAAC,KAAK,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;gBAClC,MAAM,CAAC,SAAS,CAAC,WAAW,CAAC;YAC/B,CAAC,CAAC,CAAC;YACH,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QACrB,CAAC,EAAE,aAAG;YACJ,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QACnB,CAAC,CAAC,CAAC;QAEH,OAAO,CAAC,OAAO,EAAE,CAAC;IACtB,CAAC;IAED,6BAAK,GAAL,UAAM,OAAO;QACX,IAAI,YAAY,GAAG,IAAI,wBAAwB,CAAC,OAAO,CAAC,CAAC;QACzD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC;QACrC,YAAY,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;QACpC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC;IACjC,CAAC;IACH,oBAAC;AAAD,CAAC;AAxLqB;IAAnB,0EAAS,CAAC,OAAO,CAAC;kDAAW,iEAAU,oBAAV,iEAAU;+CAAC;AACpB;IAApB,0EAAS,CAAC,QAAQ,CAAC;kDAAY,iEAAU,oBAAV,iEAAU;gDAAC;AAFhC,aAAa;IAJzB,wEAAS,CAAC;QACT,QAAQ,EAAE,gBAAgB;OACG;KAC9B,CAAC;kBAmBqB;AAuKtB;SAzLY,aAAa;;;;;;;;;;;;ACViD;AAElC;AAEzC,yGAAsB,EAAE,CAAC,eAAe,CAAC,8DAAS,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;ACJM;AACH;AACkB;AACd;AACN;AACP;AACH;AAEH;AACM;AACe;AACE;AA2B/D,IAAa,SAAS;IAAtB;IAAwB,CAAC;IAAD,gBAAC;AAAD,CAAC;AAAZ,SAAS;IAzBrB,uEAAQ,CAAC;QACR,YAAY,EAAE;YACZ,6DAAK;YACL,kEAAQ;YACR,iFAAa;SACd;QACD,OAAO,EAAE;YACP,gFAAa;YACb,iEAAU;YACV,kEAAW,CAAC,OAAO,CAAC,6DAAK,CAAC;SAC3B;QACD,SAAS,EAAE,CAAC,+DAAQ,CAAC;QACrB,eAAe,EAAE;YACf,6DAAK;YACL,kEAAQ;YACR,iFAAa;SACd;QACD,SAAS,EAAE;YACT,2EAAS;YACT,iFAAY;YACZ,oEAAM;YACN,EAAC,OAAO,EAAE,mEAAY,EAAE,QAAQ,EAAE,wEAAiB,EAAC;YACpD,oFAAe;SAChB;KACF,CAAC;GACW,SAAS,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;ACtCoB;AACD;AACY;AACM;AAEb;AAI9C,IAAa,KAAK;IAGhB,eAAY,QAAkB,EAAE,SAAoB,EAAE,YAA0B;QAFhF,aAAQ,GAAO,kEAAQ,CAAC;QAGtB,QAAQ,CAAC,KAAK,EAAE,CAAC,IAAI,CAAC;YACpB,gEAAgE;YAChE,iEAAiE;YACjE,SAAS,CAAC,YAAY,EAAE,CAAC;YACzB,YAAY,CAAC,IAAI,EAAE,CAAC;QACtB,CAAC,CAAC,CAAC;IACL,CAAC;IACH,YAAC;AAAD,CAAC;AAXY,KAAK;IAHjB,wEAAS,CAAC;OACc;KACxB,CAAC;UAIgF;AAQjF;SAXY,KAAK,2B;;;;;;;;;;;;;;;;;;;;;;ACTyB;AACmB;AAC/B;AAG/B,IAAa,eAAe;IAqB1B,yBAAmB,IAAU;QAAV,SAAI,GAAJ,IAAI,CAAM;QApB7B,YAAO,GAAG,IAAI,8DAAO,CAAC,EAAC,cAAc,EAAG,kBAAkB,EAAC,CAAC,CAAC;QAC7D,YAAO,GAAG,IAAI,qEAAc,CAAC,EAAE,OAAO,EAAE,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC;QACxD,YAAO,GAAG,yCAAyC,CAAC;QACpD,QAAG,GAAG,uDAAuD,GAAC,IAAI,CAAC,OAAO,CAAC;QAC3E,YAAO,GAAG,IAAI,CAAC,SAAS,CAAC;YACvB,UAAU,EAAE;gBACV;oBACE,UAAU,EAAE;wBACV;4BACE,MAAM,EAAE,iBAAiB;yBAC1B;qBACF;oBACD,OAAO,EAAE;wBACP,QAAQ,EAAE;4BACR,UAAU,EAAE,qCAAqC;yBAClD;qBACF;iBACF;aACF;SACF,CAAC,CAAC;QAED,OAAO,CAAC,GAAG,CAAC,gCAAgC,CAAC,CAAC;IAChD,CAAC;IAGD,sCAAY,GAAZ;QACE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC;aACjD,SAAS,CAAE,cAAI;YACd,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QACpB,CAAC,EAAE,aAAG;YACJ,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QACnB,CAAC,CAAC,CAAC;IACP,CAAC;IACH,sBAAC;AAAD,CAAC;AAlCY,eAAe;IAD3B,yEAAU,EAAE;qCAsBc,2DAAI;GArBlB,eAAe,CAkC3B;AAlC2B","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 108;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@angular/core/@angular lazy\n// module id = 108\n// module chunks = 0","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 150;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src lazy\n// module id = 150\n// module chunks = 0","import { Component } from '@angular/core';\r\nimport { NavController } from 'ionic-angular';\r\n\r\nimport { PhotolistPage } from '../photolist/photolist';\r\n\r\n@Component({\r\n  selector: 'page-home', //css selector\r\n  templateUrl: 'home.html'\r\n})\r\nexport class HomePage {\r\n  constructor(public navController: NavController) {\r\n  }\r\n\r\n  goPhotoList() {\r\n    this.navController.push(PhotolistPage);\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts","import { Component ,ElementRef, ViewChild } from '@angular/core';\r\nimport { NavController, NavParams, AlertController ,LoadingController } from 'ionic-angular';\r\nimport { Camera, CameraOptions } from '@ionic-native/camera';\r\nimport { Http, Headers, RequestOptions } from '@angular/http';\r\n\r\n\r\n@Component({\r\n  selector: 'page-photolist',\r\n  templateUrl: 'photolist.html',\r\n})\r\nexport class PhotolistPage {\r\n  @ViewChild('video') videoEle: ElementRef;\r\n  @ViewChild('canvas') canvasEle: ElementRef;\r\n\r\n  photo: string;\r\n  public base64Image: string;\r\n  public imageUrl: string;\r\n  photoInfos:any;\r\n  synth:any;\r\n  voices:any;\r\n  text: string;\r\n\r\n  constructor(\r\n      public navCtrl: NavController,\r\n      public alertCtrl: AlertController,\r\n      public navParams: NavParams,\r\n      private camera: Camera,\r\n      private loadingCtrl: LoadingController,\r\n      public http: Http,\r\n    ) {\r\n  }\r\n\r\n  ionViewWillEnter() {\r\n    this.photo='';\r\n    this.photoInfos=[];\r\n    this.synth = window.speechSynthesis;\r\n    this.voices=[];\r\n\r\n    let video =  this.videoEle.nativeElement;\r\n\r\n    //camera setup\r\n    let front = false;\r\n    let constraints = { video: { facingMode: (front? \"user\" : \"environment\") } };\r\n\r\n    if(navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\r\n        navigator.mediaDevices.getUserMedia(constraints).then(function(stream) {\r\n          if(\"srcObject\" in video) {\r\n            video.srcObject = stream;\r\n          } else {\r\n            video.src = window.URL.createObjectURL(stream);\r\n          }\r\n          video.onloadedmetadata = () => {\r\n            video.play();\r\n          }\r\n        }, err => {\r\n          let alert = this.alertCtrl.create({\r\n            title: 'Media device',\r\n            subTitle: err.name,\r\n            buttons: [{\r\n              text: 'Ok',\r\n              role: 'cancel',\r\n              handler: () => {\r\n                // this.navCtrl.pop();\r\n              }\r\n            }]\r\n          });\r\n          alert.present();\r\n        });\r\n    }else{\r\n      // no media deveice, so alert something out\r\n      let alert = this.alertCtrl.create({\r\n        title: 'Media device',\r\n        subTitle: \"No media devices found\",\r\n        buttons: ['Ok']\r\n      });\r\n      alert.present();\r\n    }\r\n  }\r\n\r\n  //for the native device\r\n  takePhoto() {\r\n    const options: CameraOptions = {\r\n      quality: 100,\r\n      destinationType: this.camera.DestinationType.DATA_URL,\r\n      encodingType: this.camera.EncodingType.JPEG,\r\n      mediaType: this.camera.MediaType.PICTURE\r\n    };\r\n\r\n    this.camera.getPicture(options).then((imageData) => {\r\n      this.base64Image = 'data:image/jpeg;base64,' + imageData;\r\n      this.photo = this.base64Image;\r\n      this.getData(imageData);\r\n    }, (err) => {\r\n      console.log(err);\r\n    });\r\n  }\r\n\r\n  //for the native device\r\n  getData(imageData) {\r\n    let headers = new Headers({'Content-Type' : 'application/json'});\r\n    let options = new RequestOptions({ headers: headers });\r\n    let API_KEY = \"AIzaSyDRgu_6xNGoVzR81dLP2LD2Pl4si3c0MVg\";\r\n    let url = 'https://vision.googleapis.com/v1/images:annotate?key='+API_KEY;\r\n    let request = JSON.stringify({\r\n      \"requests\": [\r\n        {\r\n          \"features\": [\r\n            {\r\n              \"type\": \"LABEL_DETECTION\"\r\n            }\r\n          ],\r\n          \"image\": {\r\n              \"content\":imageData\r\n          }\r\n        }\r\n      ]\r\n    });\r\n\r\n    this.http.post(url, request, options)\r\n      .subscribe( data => {\r\n        // console.log(JSON.parse(data['_body']));\r\n        this.photoInfos = JSON.parse(data['_body']).responses[0].labelAnnotations;\r\n        console.log(this.photoInfos);\r\n      }, err => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  //for web\r\n  snapPhoto() {\r\n    //show on canvas dom\r\n    let context = this.canvasEle.nativeElement.getContext('2d');\r\n    let video =  this.videoEle.nativeElement;\r\n    context.drawImage(video, 0,0,640,480);\r\n\r\n    //convert to base64 decode\r\n    let dataURL = this.canvasEle.nativeElement.toDataURL(\"image/png\");\r\n    let base64 = dataURL.replace(/^data:image\\/(png|jpg);base64,/, \"\");\r\n    // console.log(base64);\r\n    if(dataURL === null || dataURL === ''){\r\n      let alert = this.alertCtrl.create({\r\n        title: 'Photo not found',\r\n        subTitle: \"Please take a photo\",\r\n        buttons: ['Ok']\r\n      });\r\n      alert.present();\r\n    }\r\n    // set to Google Vision API and get data back\r\n    let loading = this.loadingCtrl.create({\r\n      content:'Speaking, please wait'\r\n    });\r\n\r\n    let headers = new Headers({'Content-Type' : 'application/json'});\r\n    let options = new RequestOptions({ headers: headers });\r\n    let API_KEY = \"AIzaSyDRgu_6xNGoVzR81dLP2LD2Pl4si3c0MVg\";\r\n    let url = 'https://vision.googleapis.com/v1/images:annotate?key='+API_KEY;\r\n    let request = JSON.stringify({\r\n      \"requests\": [\r\n        {\r\n          \"features\": [\r\n            {\r\n              \"type\": \"LABEL_DETECTION\"\r\n            }\r\n          ],\r\n          \"image\": {\r\n              \"content\":base64\r\n          }\r\n        }\r\n      ]\r\n    });\r\n    this.http.post(url, request, options)\r\n      .subscribe( data => {\r\n        // console.log(JSON.parse(data['_body']));\r\n        //get data back and set to photoInfos then set label buttons\r\n        this.photoInfos = JSON.parse(data['_body']).responses[0].labelAnnotations;\r\n\r\n        loading.present();\r\n        let words = this.photoInfos.map ( (photoInfo) => {\r\n          this.speak(photoInfo.description);\r\n          return photoInfo.description;\r\n        });\r\n        console.log(words);\r\n      }, err => {\r\n        console.log(err);\r\n      });\r\n\r\n      loading.dismiss();\r\n  }\r\n\r\n  speak(content) {\r\n    let speakContent = new SpeechSynthesisUtterance(content);\r\n    this.voices = this.synth.getVoices();\r\n    speakContent.voice = this.voices[0];\r\n    this.synth.speak(speakContent);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/photolist/photolist.ts","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app.module';\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/main.ts","import { BrowserModule } from '@angular/platform-browser';\r\nimport { ErrorHandler, NgModule } from '@angular/core';\r\nimport { IonicApp, IonicErrorHandler, IonicModule } from 'ionic-angular';\r\nimport { SplashScreen } from '@ionic-native/splash-screen';\r\nimport { StatusBar } from '@ionic-native/status-bar';\r\nimport { Camera } from '@ionic-native/camera';\r\nimport { HttpModule } from '@angular/http';\r\n\r\nimport { MyApp } from './app.component';\r\nimport { HomePage } from '../pages/home/home';\r\nimport { PhotolistPage } from '../pages/photolist/photolist';\r\nimport { GvisionProvider } from '../providers/gvision/gvision';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    MyApp,\r\n    HomePage,\r\n    PhotolistPage\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    HttpModule,\r\n    IonicModule.forRoot(MyApp)\r\n  ],\r\n  bootstrap: [IonicApp],\r\n  entryComponents: [\r\n    MyApp,\r\n    HomePage,\r\n    PhotolistPage\r\n  ],\r\n  providers: [\r\n    StatusBar,\r\n    SplashScreen,\r\n    Camera,\r\n    {provide: ErrorHandler, useClass: IonicErrorHandler},\r\n    GvisionProvider\r\n  ]\r\n})\r\nexport class AppModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","import { Component } from '@angular/core';\r\nimport { Platform } from 'ionic-angular';\r\nimport { StatusBar } from '@ionic-native/status-bar';\r\nimport { SplashScreen } from '@ionic-native/splash-screen';\r\n\r\nimport { HomePage } from '../pages/home/home';\r\n@Component({\r\n  templateUrl: 'app.html'\r\n})\r\nexport class MyApp {\r\n  rootPage:any = HomePage;\r\n\r\n  constructor(platform: Platform, statusBar: StatusBar, splashScreen: SplashScreen) {\r\n    platform.ready().then(() => {\r\n      // Okay, so the platform is ready and our plugins are available.\r\n      // Here you can do any higher level native things you might need.\r\n      statusBar.styleDefault();\r\n      splashScreen.hide();\r\n    });\r\n  }\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","import { Injectable } from '@angular/core';\r\nimport { Http, Headers, RequestOptions } from '@angular/http';\r\nimport 'rxjs/add/operator/map';\r\n\r\n@Injectable()\r\nexport class GvisionProvider {\r\n  headers = new Headers({'Content-Type' : 'application/json'});\r\n  options = new RequestOptions({ headers: this.headers });\r\n  API_KEY = \"AIzaSyDRgu_6xNGoVzR81dLP2LD2Pl4si3c0MVg\";\r\n  url = 'https://vision.googleapis.com/v1/images:annotate?key='+this.API_KEY;\r\n  request = JSON.stringify({\r\n    \"requests\": [\r\n      {\r\n        \"features\": [\r\n          {\r\n            \"type\": \"LABEL_DETECTION\"\r\n          }\r\n        ],\r\n        \"image\": {\r\n          \"source\": {\r\n            \"imageUri\": \"gs://photoapp_images/demo-image.jpg\"\r\n          }\r\n        }\r\n      }\r\n    ]\r\n  });\r\n  constructor(public http: Http) {\r\n    console.log('Hello GvisionProvider Provider');\r\n  }\r\n\r\n\r\n  getImageInfo() {\r\n    this.http.post(this.url, this.request, this.options)\r\n      .subscribe( data => {\r\n        console.log(data);\r\n      }, err => {\r\n        console.log(err);\r\n      });\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/gvision/gvision.ts"],"sourceRoot":""}